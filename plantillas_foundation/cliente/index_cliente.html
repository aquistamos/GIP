{% extends "cliente/base_cliente.html" %}
{% load staticfiles %}

{% block purejavascript %}
  function addHidden(theForm, key, value) {
      // Create a hidden input element, and append it to the form:
      var input = document.createElement('input');
      input.type = 'hidden';
      input.name = key;'name-as-seen-at-the-server';
      input.value = value;
      theForm.appendChild(input);
  }
  
  function submit_producto(producto_id) {
      var selectBox = document.getElementById(producto_id);
      var lista_id = selectBox.options[selectBox.selectedIndex].value;
      myform = document.forms["add_producto_lista"];
      // add your favorite JS validators here
      addHidden(myform,'producto_id', producto_id)
      addHidden(myform,'lista_id', lista_id)
      myform.submit();

  }
{% endblock %}


{% block content %}
        <div class="large-8 columns">
          <div class="row">
{% for promo in promo_list %}
            <div class="large-4 small-6 columns">
              <img src="http://placehold.it/1000x1000&text=Thumbnail">

              <div class="panel">
                <h5>{{ promo.nombre }}</h5>
                <h6 class="subheader">{{ promo.precio }}</h6>
                <h6 class="subheader">{{ promo.descripcion }}</h6>
	{% if promo.producto_id %}
                <div class="search">
                      <select id="{{ promo.producto_id }}" onchange="submit_producto('{{ promo.producto_id }}');">
                        <option value="">AÃ±adir a Lista</option>
	 	{% for lista in user_listas %}
                        <option value="{{ lista.id }}">{{ lista.nombre }}</option>
		{% endfor %}
                      </select>
                </div>
	{% endif %}
              </div>
            </div>
{% endfor %}
    <form id="add_producto_lista" action="http://localhost:8080/cliente/add_tolist/" method="post">
       <!-- csrf-->
        {% csrf_token %}
    </form>

{% endblock %}

